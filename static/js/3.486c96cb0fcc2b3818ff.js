webpackJsonp([3],{"v/PK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("Xxa5"),i=n.n(r),u=n("fZjL"),s=n.n(u),o=n("exGp"),l=n.n(o),c=n("//Fk"),d=n.n(c),f=this,h=(a=l()(i.a.mark(function e(t,n){var a,r,u,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="5b2f0a2e116e9b0",r="https://api.imgur.com/3/image",u=null,"POST"!==t){e.next=11;break}return e.next=6,p(n);case 6:return s=e.sent,o=s.split(","),e.next=10,o[1].toString();case 10:u=e.sent;case 11:return e.abrupt("return",fetch("POST"===t?r:r+"/"+n,{body:""+("POST"===t?u:""),cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Client-ID "+a,Accept:"multipart/form-data"},method:t,mode:"cors"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)}));case 12:case"end":return e.stop()}},e,f)})),function(e,t){return a.apply(this,arguments)});function p(e){var t=new FileReader;return new d.a(function(n,a){t.onerror=function(){t.abort(),a("load file fail")},t.onload=function(){n(t.result)},t.readAsDataURL(e)})}var m,g={readFile:(m=l()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t));case 1:case"end":return e.stop()}},e,f)})),function(e){return m.apply(this,arguments)}),uploadFile:function(e){return h("POST",e)},deleteFile:function(e){return h("DELETE",e)}},_=(n("NYxO"),{name:"ImageUploader",data:function(){return{image:null,image_url:null,image_show:!0,isLoading:!1,upload_result:{link:null,deletehash:null}}},methods:{uploadImage:function(){var e=l()(i.a.mark(function e(t){var n,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,g.uploadFile(t);case 3:!0===(n=e.sent).success&&(this.isLoading=!1,s()(this.upload_result).forEach(function(e){return a.upload_result[e]=n.data[e]}),this.$emit("set-result",this.upload_result));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteImage:function(){var e=l()(i.a.mark(function e(){var t=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.deleteFile(this.upload_result.deletehash);case 2:!0===e.sent.success&&(s()(this.upload_result).forEach(function(e){return t.upload_result[e]=null}),this.$emit("set-result",{link:null,deletehash:null}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onFileChange:function(e){var t=this,n=e.target.files||e.dataTransfer.files;n.length&&g.readFile(n[0]).then(function(e){t.image_url=e})}}}),v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form-file",{attrs:{placeholder:"選擇圖片",accept:"image/*",state:Boolean(e.image)},on:{change:e.onFileChange},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),e._v(" "),e.image?n("div",[n("b-btn",{on:{click:function(t){e.image_show=!e.image_show}}},[e._v(e._s(e.image_show?"關閉預覽":"開啟預覽"))]),e._v(" "),e.image_show?n("b-img",{attrs:{src:e.image_url}}):e._e()],1):e._e(),e._v(" "),n("div",[n("b-button",{attrs:{disabled:!e.image,variant:e.image?"success":""},on:{click:function(t){e.uploadImage(e.image)}}},[e._v(e._s(e.isLoading?"上傳中...":"上傳到 imgur"))]),e._v(" "),e.upload_result.link?n("b-button",{on:{click:e.deleteImage}},[e._v("取消上傳")]):e._e()],1)],1)},staticRenderFns:[]},b=n("VU/8")(_,v,!1,null,null,null);t.default=b.exports}});